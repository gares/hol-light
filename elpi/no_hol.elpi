%%% ===========================================================================
%%% Load Elpi code without HOL and ML.
%%% ===========================================================================

%% ----------------------------------------------------------------------------
%% Load Elpi files that do no not depend on HOL.
%% ----------------------------------------------------------------------------

accumulate verbosity.
accumulate test.
accumulate pre_hol.

%% ----------------------------------------------------------------------------
%% Bogus definitions.
%% ----------------------------------------------------------------------------

% Bogus definition for predicate numeral.
numeral "0"
  (combp (constp "NUMERAL" (ptycon "fun" [ptycon "num" [], ptycon "num" []]))
    (constp "_0" (ptycon "num" []))).

pred hol.interface % lookup the interpretations of overloaded constant
  i:string, % constant overloaded name
  o:list (pair string pretype).

hol.interface "<=>"
  [pr "="
      (ptycon "fun" [uty "A",ptycon "fun" [uty "A",ptycon "bool" []]]) ].

%% ----------------------------------------------------------------------------
%% Load more Elpi files.
%% ----------------------------------------------------------------------------

accumulate elab.
accumulate infer.

%% ----------------------------------------------------------------------------
%% Run tests.
%% ----------------------------------------------------------------------------

shorten verbosity.{ quiet, terse, info, verbose, debug, with-verbosity }.
shorten test.{ run-tests }.

main :-
  with-verbosity terse (run-tests
    [ {pre_hol_tests}
    , {elab_tests}
    , {infer_test}
    , {elaborate_tests}
    ]
  ).
